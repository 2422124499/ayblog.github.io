---
layout:     post
title:      在Mac下反编译apk
subtitle:   反编译apk
date:       2017-06-12
author:     Meswx
header-img: img/post-bg-hacker.jpg
catalog: true
tags:
    - 反编译
    - apk
---

# 在Mac下反编译apk

谷歌本身提供了相关工具进行apk的**反编译**，但是随着**代码混淆**和apk**安全加固**的发展，反编译已经很少需要使用到，但是获取一个apk的**资源文件**等，使用反编译是最小代价的。谷歌提供的反编译工具，本身是跨平台的，可以在windows/mac/linux上都可以运行，因为大部分工具是jar形式的。下文以mac下就如何反编译apk开展：

## apktool

**apktool**，是获取资源文件等工具，如提取出图标，图片等资源，当然还有布局文件，动画等等xml文件。

![](http://ww1.sinaimg.cn/large/006tNc79gy1g5j5281kihj31360aoq3o.jpg)

1.下载 [脚本](https://raw.githubusercontent.com/iBotPeaches/Apktool/master/scripts/osx/apktool)，保存为apktool（**注意修改文件后缀为空**）；

![](http://ww1.sinaimg.cn/large/006tNc79gy1g5j527w7hxj30oq058glt.jpg)

2.下载最新的 [apktool.jar](https://bitbucket.org/iBotPeaches/apktool/downloads)；

![](http://ww1.sinaimg.cn/large/006tNc79gy1g5j527txdqj31d40eqmxx.jpg)

3.将下载的jar包重命名为apktool.jar；

4.将下载的apktool和apktool.jar移到/usr/local/bin目录；

5.修改这2个文件等权限；

```
将两个文件的权限设为可执行，执行命令：chmod +x apktool apktool.jar
```

![](http://ww1.sinaimg.cn/large/006tNc79gy1g5j527r4g5j30vg01o0sl.jpg)

6.验证是否**apktool**安装成功

![](http://ww1.sinaimg.cn/large/006tNc79gy1g5j527k0qtj30vi04c3yv.jpg)

7.对指定的apk进行反编译，获取资源文件

```
apktool -d <你要反编译的apk>.apk
``` 
        
![](http://ww2.sinaimg.cn/large/006tNc79gy1g5j527a8twj30ve07ymxv.jpg)

## dex2jar

**dex2jar**，是把虚拟机编译成的dex文件为jar后，可以通过**jd-gui**，直接打开浏览源码。

1.下载并解压 [dex2jar](https://sourceforge.net/projects/dex2jar/)；

2.为dex2jar添加权限

```
chmod a+x
```

![](http://ww1.sinaimg.cn/large/006tNc79gy1g5j5277lkcj30ve028a9y.jpg)

3.将class.dex拷贝到dex2jar文件夹下<br>
4.执行命令

```
sh d2j-dex2jar.sh classes.dex得到classes-dex2jar.jar
```
![](http://ww2.sinaimg.cn/large/006tNc79gy1g5j52753wfj30va01qaa1.jpg)

## jd-gui

[**jd-gui**](http://jd.benow.ca/)，可以查看dex2jar编译出的jar，反编译成源码。



